<!DOCTYPE html>
<html>
    <script>
        async function buildPage(jsonLink) {
            let response = await fetch(jsonLink)
            let gig = await response.json();
            document.getElementById("title").innerHTML = gig.title;
            document.getElementById("date_venue").innerHTML = gig.venue.name + ", " + gig.venue.suburb + ", " + gig.date;
            document.getElementById("description").innerHTML = gig.description;
            artistSection(gig);
            tagSection(gig);
        }
        function artistSection(gig) {
            let text = "<h3>Artists:</h3><ol>"
            for (let i = 0; i < gig.artists.length; i++) {
                text += "<li> <a href=\"${gig.artists[i].id}\">" + gig.artists[i].name + " </a> </li>";
            }
            text += "</ol>";
            document.getElementById("artists").innerHTML = text;
        }
        function tagSection(gig) {
            let text = "<h3>Tags:</h3><p>"
            for (let i = 0; i < gig.tags.length; i++) {
                if (i + 1 == gig.tags.length) {
                    text += gig.tags[i]
                }
                else {
                    text += gig.tags[i] + ", ";
                }
            }
            text += "</p>";
            document.getElementById("tags").innerHTML = text;
        }
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        const id = urlParams.get('id')
        const pageObject = id + "/" + id + ".json";
        buildPage(pageObject);
    </script>
    <header>
        <link rel="stylesheet" href="../style.css">
    </header>
    <div class="header">
        <h1>Gig city</h1>
    </div>
    <div class="content"> 
        <div class="info-head">
            <h1 id="title">Sidney Phillips, Brazen Barbie + More</h1>
            <h3 id="date_venue">The Evelyn Hotel, Fitzroy, 21 December 2025</h3>
        </div>
        <div class="main-content">
            <div class="gig-body" id="description">
                The Upstairs Neighbour End of Year Rap Up ‚ÜîÔ∏è Tickets on sale now<br>
                Celebrate with the biggest names in the scene, see you Dec 21st from 6PM at @theevelynhotel ‚ù§Ô∏è‚Äçüî•<br>
                üîó in bio for more<br>
                artwork by @soft___s
            </div>
            <div class="gig-body" id="right-sidebar">
                <div class="right-sidebar-content" id="artists">
                    <h3>Artists:</h3>
                    <ol>
                        <li>Sidney Phillips</li>
                        <li>Brazen Barbie</li>
                        <li>VV Ace</li>
                        <li>Yung Maynie</li>
                        <li>hvxeem</li>
                        <li>Fred the Conqueror</li>
                        <li>choc</li>
                        <li>Adnam</li>
                        <li>Skratcha</li>
                        <li>Indi the Giant</li>
                        <li>Kill Travis</li>
                        <!--<li>chonzu</li>-->
                    </ol>
                </div>
                <div class="right-sidebar-content" id="links">
                    <h3>Links:</h3>
                    <a href="http://instagram.com"> Instagram post </a>
                </div>
                <div class="right-sidebar-content" id="tags">
                    <h3>Tags:</h3>
                    <p>hip hop, rap, aus rap, underground</p>
                </div>
            </div>
        </div>
    </div>
    <div class="footer">
        <div>
            <p>Melbourne Gig Guide was created and is used on the lands of the Wurundjeri people of the Kulin nation. We pay our respects to elders past, present and emerging, and acknowledge that this land was stolen and never ceded.</p>
            <p>Created by Harry Adnam and oddconverse.</p>
        </div>
    </div>
</html>